"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[65],{2161:function(e,t,a){a.r(t);var r=a(2791),s=a(8687),n=a(9673),o=a(890),d=a(8550),h=a(7198),i=a(3786),l=a(6151),c=a(3400),p=a(1889),y=a(9281),g=a(5527),u=a(9836),m=a(6890),w=a(5855),x=a(3994),k=a(3382),j=a(6812),S=a(2456),Z=a(6999),P=(a(7161),a(2978),a(666),a(4925)),D=a(8096),C=a(6286),b=a(3708),R=a(5985),v=a(184);class K extends r.Component{constructor(e){super(e),this.handleSearchQueryChange=e=>{this.props.updateAnyKeywordState({kstsearchQuery:e.target.value})},this.handleSearchOptionChange=e=>{this.props.updateAnyKeywordState({kstsearchOption:e.target.value})},this.handleSelectDateRangeChange=e=>{this.props.updateAnyKeywordState({kstdateRange:e.selection})},this.toggleCalendar=()=>{this.setState((e=>({showCalendar:!e.showCalendar})))},this.handleSearch=()=>{this.props.updateAnyKeywordState({kstpage:0}),this.props.fetchTotalKeywordSummaryRecords(),this.props.fetchKeywordSummaryRecords()},this.handleDownload=async()=>{this.setState({loadingState:!0});const{kstpage:e,kstrowsPerPage:t,kstsearchQuery:a,kstsearchOption:r,kstdateRange:s}=this.props;try{const n=await fetch(`${b.A}/api/keyword_summary?page=${e}&rowsPerPage=${t}&searchQuery=${a}&searchOption=${r}&startDate=${s.startDate}&endDate=${s.endDate}&download=true`,{method:"GET",headers:{Accept:"text/csv"}}),o=await n.blob(),d=window.URL.createObjectURL(o),h=document.createElement("a");h.href=d,h.setAttribute("download","keyword_summary.csv"),document.body.appendChild(h),h.click(),this.setState({loadingState:!1})}catch(n){R.Am.error("Error downloading file",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),console.error("Error downloading records:",n),this.setState({loadingState:!1})}},this.handleChangePage=(e,t)=>{this.props.updateAnyKeywordState({kstpage:t}),this.props.fetchKeywordSummaryRecords()},this.handleChangeRowsPerPage=e=>{const t=parseInt(e.target.value,10);this.props.updateAnyKeywordState({kstrowsPerPage:t,kstpage:0}),this.props.fetchKeywordSummaryRecords()},this.handleDateChange=e=>{const{name:t,value:a}=e.target;"startDate"===t&&""!==this.state.endDate?this.props.updateAnyKeywordState({kstdateRange:{startDate:a,endDate:this.props.kstdateRange.endDate}}):"endDate"===t&&""!==this.state.startDate&&this.props.updateAnyKeywordState({kstdateRange:{startDate:this.props.kstdateRange.startDate,endDate:a}})},this.state={showCalendar:!1,loadingState:!1}}componentDidMount(){this.props.fetchTotalKeywordSummaryRecords(),this.props.fetchKeywordSummaryRecords()}render(){const{summaryrecords:e,loading:t,error:a,totalKeywordSummaryRecords:r,kstpage:s,kstrowsPerPage:n,kstsearchQuery:b,kstsearchOption:R,kstdateRange:K}=this.props,{showCalendar:_,loadingState:f}=this.state;return(0,v.jsxs)("div",{children:[t&&(0,v.jsx)("div",{className:"loader-container",children:(0,v.jsx)(C.Nx,{width:"200",color:"#5e35b1",ariaLabel:"loading",wrapperStyle:!0,wrapperClass:!0})}),(0,v.jsxs)(Z.Z,{className:"card",children:[(0,v.jsx)("h1",{children:"Keyword Summary Table"}),a&&(0,v.jsx)(o.Z,{color:"error",children:a}),(0,v.jsxs)("div",{children:[(0,v.jsx)(d.Z,{sx:{m:1,width:300},label:"Start Date",type:"date",name:"startDate",value:K.startDate,onChange:this.handleDateChange,InputLabelProps:{shrink:!0},inputProps:{max:K.endDate}}),(0,v.jsx)(d.Z,{sx:{m:1,width:300},label:"End Date",type:"date",name:"endDate",value:K.endDate,onChange:this.handleDateChange,InputLabelProps:{shrink:!0},inputProps:{min:K.startDate}}),(0,v.jsxs)(D.Z,{sx:{m:1,width:300},children:[(0,v.jsx)(P.Z,{id:"search-option",children:"Select Parameter"}),(0,v.jsxs)(h.Z,{label:"Select Parameter",id:"search-option",value:R,onChange:this.handleSearchOptionChange,style:{minWidth:"300px"},children:[(0,v.jsx)(i.Z,{value:"All",children:"Select"}),(0,v.jsx)(i.Z,{value:"rig_name",children:"RIG Name"}),(0,v.jsx)(i.Z,{value:"well_name",children:"Well Name"}),(0,v.jsx)(i.Z,{value:"job_status",children:"Job Status"})]})]}),(0,v.jsxs)(D.Z,{sx:{m:1,width:300},children:[(0,v.jsx)(P.Z,{id:"search-query"}),(0,v.jsx)(d.Z,{type:"text",id:"search-query",value:b,onChange:this.handleSearchQueryChange,label:"Search"})]}),(0,v.jsx)(l.Z,{variant:"contained",style:{background:"#5e35b1",padding:"11px",margin:"11px"},onClick:this.handleSearch,children:"Search"}),(0,v.jsx)(c.Z,{onClick:this.handleDownload,disabled:f,children:(0,v.jsx)(S.Z,{style:{color:"#5e35b1"}})})]}),(0,v.jsx)("br",{}),(0,v.jsx)(p.ZP,{container:!0,spacing:2,children:(0,v.jsxs)(p.ZP,{item:!0,xs:12,children:[(0,v.jsx)(y.Z,{component:g.Z,children:(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(m.Z,{children:(0,v.jsxs)(w.Z,{children:[(0,v.jsx)(x.Z,{children:"Operation Date"}),(0,v.jsx)(x.Z,{children:"Rig"}),(0,v.jsx)(x.Z,{children:"Well"}),(0,v.jsx)(x.Z,{children:"Job Start Date"}),(0,v.jsx)(x.Z,{children:"Job End Date"}),(0,v.jsx)(x.Z,{children:"Job Status"})]})}),(0,v.jsx)(k.Z,{children:e.map((e=>(0,v.jsxs)(w.Z,{children:[(0,v.jsx)(x.Z,{children:e.created_at}),(0,v.jsx)(x.Z,{children:e.rig_name}),(0,v.jsx)(x.Z,{children:e.well_name}),(0,v.jsx)(x.Z,{children:e.start_date}),(0,v.jsx)(x.Z,{children:e.end_date}),(0,v.jsx)(x.Z,{style:{textTransform:"capitalize"},children:e.job_status})]},e._id)))})]})}),(0,v.jsx)(j.Z,{rowsPerPageOptions:[5,10,25,50,100,500],component:"div",rowsPerPage:n,page:s,onPageChange:this.handleChangePage,onRowsPerPageChange:this.handleChangeRowsPerPage,count:r})]})})]})]})}}const _={fetchKeywordSummaryRecords:n.oc,fetchTotalKeywordSummaryRecords:n.y0,updateAnyKeywordState:n.sj};t.default=(0,s.$j)((e=>({summaryrecords:e.keyword.keywordSummaryRecords,loading:e.keyword.loading,error:e.keyword.error,totalKeywordSummaryRecords:e.keyword.totalKeywordSummaryRecords,kstpage:e.keyword.kstpage,kstrowsPerPage:e.keyword.kstrowsPerPage,kstsearchQuery:e.keyword.kstsearchQuery,kstsearchOption:e.keyword.kstsearchOption,kstdateRange:e.keyword.kstdateRange})),_)(K)},2456:function(e,t,a){var r=a(9201),s=a(184);t.Z=(0,r.Z)((0,s.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")}}]);
//# sourceMappingURL=65.0304e307.chunk.js.map