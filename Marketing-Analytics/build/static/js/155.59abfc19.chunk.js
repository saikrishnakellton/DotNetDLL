"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[155],{9418:function(e,a,t){t.r(a),t.d(a,{default:function(){return se}});var r=t(2791),s=t(8687),i=t(9673),n=t(890),l=t(8550),o=t(7198),d=t(3786),h=t(6151),c=t(3400),p=t(1889),u=t(3366),g=t(7462),y=t(8182),x=t(4419),v=t(2554),k=t(4036),w=t(3736),Z=t(6934),b=t(5878),j=t(1217);function m(e){return(0,j.Z)("MuiCircularProgress",e)}(0,b.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var f=t(184);const S=["className","color","disableShrink","size","style","thickness","value","variant"];let C,R,P,D,_=e=>e;const A=44,L=(0,v.F4)(C||(C=_`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),Q=(0,v.F4)(R||(R=_`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),K=(0,Z.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,a[t.variant],a[`color${(0,k.Z)(t.color)}`]]}})((e=>{let{ownerState:a,theme:t}=e;return(0,g.Z)({display:"inline-block"},"determinate"===a.variant&&{transition:t.transitions.create("transform")},"inherit"!==a.color&&{color:(t.vars||t).palette[a.color].main})}),(e=>{let{ownerState:a}=e;return"indeterminate"===a.variant&&(0,v.iv)(P||(P=_`
      animation: ${0} 1.4s linear infinite;
    `),L)})),O=(0,Z.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,a)=>a.svg})({display:"block"}),$=(0,Z.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.circle,a[`circle${(0,k.Z)(t.variant)}`],t.disableShrink&&a.circleDisableShrink]}})((e=>{let{ownerState:a,theme:t}=e;return(0,g.Z)({stroke:"currentColor"},"determinate"===a.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===a.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(e=>{let{ownerState:a}=e;return"indeterminate"===a.variant&&!a.disableShrink&&(0,v.iv)(D||(D=_`
      animation: ${0} 1.4s ease-in-out infinite;
    `),Q)}));var M=r.forwardRef((function(e,a){const t=(0,w.Z)({props:e,name:"MuiCircularProgress"}),{className:r,color:s="primary",disableShrink:i=!1,size:n=40,style:l,thickness:o=3.6,value:d=0,variant:h="indeterminate"}=t,c=(0,u.Z)(t,S),p=(0,g.Z)({},t,{color:s,disableShrink:i,size:n,thickness:o,value:d,variant:h}),v=(e=>{const{classes:a,variant:t,color:r,disableShrink:s}=e,i={root:["root",t,`color${(0,k.Z)(r)}`],svg:["svg"],circle:["circle",`circle${(0,k.Z)(t)}`,s&&"circleDisableShrink"]};return(0,x.Z)(i,m,a)})(p),Z={},b={},j={};if("determinate"===h){const e=2*Math.PI*((A-o)/2);Z.strokeDasharray=e.toFixed(3),j["aria-valuenow"]=Math.round(d),Z.strokeDashoffset=`${((100-d)/100*e).toFixed(3)}px`,b.transform="rotate(-90deg)"}return(0,f.jsx)(K,(0,g.Z)({className:(0,y.Z)(v.root,r),style:(0,g.Z)({width:n,height:n},b,l),ownerState:p,ref:a,role:"progressbar"},j,c,{children:(0,f.jsx)(O,{className:v.svg,ownerState:p,viewBox:"22 22 44 44",children:(0,f.jsx)($,{className:v.circle,style:Z,ownerState:p,cx:A,cy:A,r:(A-o)/2,fill:"none",strokeWidth:o})})}))})),I=t(9281),z=t(5527),E=t(9836),N=t(6890),q=t(5855),W=t(3994),H=t(3382),T=t(6812),V=t(2456),F=t(5683),B=t(7893),G=t(8820),J=t(6999),U=(t(7161),t(2978),t(666),t(4925)),X=t(8096),Y=t(6286),ee=t(3708),ae=t(5985);class te extends r.Component{constructor(e){super(e),this.handleSearchQueryChange=e=>{this.props.updateAnyKeywordState({kbasearchQuery:e.target.value})},this.handleSearchOptionChange=e=>{this.props.updateAnyKeywordState({kbasearchOption:e.target.value})},this.handleSearchLevelOptionChange=e=>{this.props.updateAnyKeywordState({kbasearchLevel:e.target.value})},this.handleSearchQualifiedOptionChange=e=>{this.props.updateAnyKeywordState({kbasearchQualified:e.target.value})},this.handleSelectDateRangeChange=e=>{this.props.updateAnyKeywordState({kbadateRange:e.selection})},this.toggleCalendar=()=>{this.setState((e=>({showCalendar:!e.showCalendar})))},this.handleSearch=()=>{this.props.updateAnyKeywordState({kbapage:0}),this.props.fetchTotalKeywordAnalysisRecords(),this.props.fetchKeywordAnalysisRecords()},this.handleDownload=async()=>{this.setState({loading_state:!0});const{kbapage:e,kbarowsPerPage:a,kbasearchLevel:t,kbasearchQuery:r,kbasearchOption:s,kbasearchQualified:i,kbadateRange:n}=this.props;try{const l=await fetch(`${ee.A}/api/keyword_analysis?page=${e}&rowsPerPage=${a}&searchQualified=${i}&searchLevel=${t}&searchQuery=${r}&searchOption=${s}&startDate=${n.startDate}&endDate=${n.endDate}&download=true`,{method:"GET",headers:{Accept:"text/csv"}}),o=await l.blob(),d=window.URL.createObjectURL(o),h=document.createElement("a");h.href=d,h.setAttribute("download","keyword_based_analysis.csv"),document.body.appendChild(h),h.click(),this.setState({loading_state:!1})}catch(l){ae.Am.error("Error downloading file",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),console.error("Error downloading records:",l),this.setState({loading_state:!1})}},this.handleChangePage=(e,a)=>{this.props.updateAnyKeywordState({kbapage:a}),this.props.fetchKeywordAnalysisRecords()},this.handleChangeRowsPerPage=e=>{const a=parseInt(e.target.value,10);this.props.updateAnyKeywordState({kbarowsPerPage:a,kbapage:0}),this.props.fetchKeywordAnalysisRecords()},this.handleInputChange=(e,a)=>{const{name:t,value:r}=e.target;a?(this.setState((e=>({editingRecord:{...e.editingRecord,[t]:r}}))),console.log(this.state)):this.setState((e=>({newRecord:{...e.newRecord,[t]:r}})))},this.handleEditRecord=e=>{this.setState({editingRecordId:e._id,editingRecord:e})},this.handleSaveRecord=e=>{const a={};Object.keys(this.state.editingRecord).forEach((t=>{e.hasOwnProperty(t)&&e[t]!==this.state.editingRecord[t]&&(a[t]=this.state.editingRecord[t])})),this.props.updateQualifiedStatus(e._id,a.status,this.props.kbapage,this.props.kbarowsPerPage),this.setState({editingRecordId:null,editingRecord:{}})},this.handleCancelEdit=()=>{this.setState({editingRecordId:null,editingRecord:{}})},this.handleDateChange=e=>{const{name:a,value:t}=e.target;"startDate"===a&&""!==this.state.endDate?this.props.updateAnyKeywordState({kbadateRange:{startDate:t,endDate:this.props.kbadateRange.endDate}}):"endDate"===a&&""!==this.state.startDate&&this.props.updateAnyKeywordState({kbadateRange:{startDate:this.props.kbadateRange.startDate,endDate:t}})},this.state={editableRows:new Set,loading_state:!1,editingRecord:{},editingRecordId:null,showCalendar:!1}}componentDidMount(){this.props.fetchTotalKeywordAnalysisRecords(),this.props.fetchKeywordAnalysisRecords()}render(){const{records:e,loading:a,error:t,totalKeywordAnalysisRecords:r,kbapage:s,kbarowsPerPage:i,kbasearchQualified:u,kbasearchQuery:g,kbasearchOption:y,kbasearchLevel:x,kbadateRange:v}=this.props,{editingRecordId:k,showCalendar:w,loading_state:Z}=this.state;return(0,f.jsxs)("div",{children:[a&&(0,f.jsx)("div",{className:"loader-container",children:(0,f.jsx)(Y.Nx,{width:"200",color:"#5e35b1",ariaLabel:"loading",wrapperStyle:!0,wrapperClass:!0})}),(0,f.jsxs)(J.Z,{className:"card",children:[(0,f.jsx)("h1",{children:"Keyword Based Analysis"}),t&&(0,f.jsx)(n.Z,{color:"error",children:t}),(0,f.jsxs)("div",{children:[(0,f.jsx)(l.Z,{sx:{m:1,width:300},label:"Start Date",type:"date",name:"startDate",value:v.startDate,onChange:this.handleDateChange,InputLabelProps:{shrink:!0},inputProps:{max:v.endDate}}),(0,f.jsx)(l.Z,{sx:{m:1,width:300},label:"End Date",type:"date",name:"endDate",value:v.endDate,onChange:this.handleDateChange,InputLabelProps:{shrink:!0},inputProps:{min:v.startDate}}),(0,f.jsxs)(X.Z,{sx:{m:1,width:300},children:[(0,f.jsx)(U.Z,{id:"search-level",children:"Level"}),(0,f.jsxs)(o.Z,{label:"Level",id:"search-level",value:x,onChange:this.handleSearchLevelOptionChange,style:{minWidth:"300px"},children:[(0,f.jsx)(d.Z,{value:"All",children:"All"}),(0,f.jsx)(d.Z,{value:"Level 1",children:"Level 1"}),(0,f.jsx)(d.Z,{value:"Level 2",children:"Level 2"}),(0,f.jsx)(d.Z,{value:"Level 3",children:"Level 3"}),(0,f.jsx)(d.Z,{value:"Level 4",children:"Level 4"})]})]}),(0,f.jsxs)(X.Z,{sx:{m:1,width:300},children:[(0,f.jsx)(U.Z,{id:"search-qualified",children:"Qualified Status"}),(0,f.jsxs)(o.Z,{label:"Qualified Status",id:"search-qualified",value:u,onChange:this.handleSearchQualifiedOptionChange,style:{minWidth:"300px"},children:[(0,f.jsx)(d.Z,{value:"All",children:"All"}),(0,f.jsx)(d.Z,{value:"Qualified",children:"Qualified"}),(0,f.jsx)(d.Z,{value:"Disqualified",children:"Disqualified"})]})]}),(0,f.jsxs)(X.Z,{sx:{m:1,width:300},children:[(0,f.jsx)(U.Z,{id:"search-option",children:"Select Parameter"}),(0,f.jsxs)(o.Z,{label:"Select Parameter",id:"search-option",value:y,onChange:this.handleSearchOptionChange,style:{minWidth:"300px"},children:[(0,f.jsx)(d.Z,{value:"All",children:"Select"}),(0,f.jsx)(d.Z,{value:"rig_name",children:"RIG Name"}),(0,f.jsx)(d.Z,{value:"well_name",children:"Well Name"}),(0,f.jsx)(d.Z,{value:"job_type",children:"Job Type"})]})]}),(0,f.jsxs)(X.Z,{sx:{m:1,width:300},children:[(0,f.jsx)(U.Z,{id:"search-query"}),(0,f.jsx)(l.Z,{type:"text",id:"search-query",value:g,onChange:this.handleSearchQueryChange,label:"Search"})]}),(0,f.jsx)(h.Z,{variant:"contained",style:{background:"#5e35b1",padding:"11px",margin:"11px"},onClick:this.handleSearch,children:"Search"}),(0,f.jsx)(c.Z,{onClick:this.handleDownload,disabled:Z,children:(0,f.jsx)(V.Z,{style:{color:"#5e35b1"}})})]}),(0,f.jsx)("br",{}),(0,f.jsx)(p.ZP,{container:!0,spacing:2,children:(0,f.jsxs)(p.ZP,{item:!0,xs:12,children:[this.state.loading&&(0,f.jsx)(M,{}),(0,f.jsx)(I.Z,{component:z.Z,children:(0,f.jsxs)(E.Z,{children:[(0,f.jsx)(N.Z,{children:(0,f.jsxs)(q.Z,{children:[(0,f.jsx)(W.Z,{children:"Action"}),(0,f.jsx)(W.Z,{children:"Operation Date"}),(0,f.jsx)(W.Z,{children:"Rig"}),(0,f.jsx)(W.Z,{children:"Well"}),(0,f.jsx)(W.Z,{children:"Job Type"}),(0,f.jsx)(W.Z,{children:"Qualified?"}),e.search_keywords_categories.map((e=>(0,f.jsx)(W.Z,{children:e},e)))]})}),(0,f.jsx)(H.Z,{children:e.daily_upload_data.map((a=>(0,f.jsxs)(q.Z,{children:[(0,f.jsx)(W.Z,{children:k===a._id?(0,f.jsxs)("div",{children:[(0,f.jsx)(c.Z,{onClick:()=>this.handleSaveRecord(a),children:(0,f.jsx)(F.Z,{color:"success"})}),(0,f.jsx)(c.Z,{onClick:this.handleCancelEdit,children:(0,f.jsx)(B.Z,{color:"error"})})]}):(0,f.jsx)("div",{children:(0,f.jsx)(c.Z,{onClick:()=>this.handleEditRecord(a),children:(0,f.jsx)(G.Z,{style:{color:"#5e35b1"}})})})}),(0,f.jsx)(W.Z,{children:a.created_at}),(0,f.jsx)(W.Z,{children:a.rig_name}),(0,f.jsx)(W.Z,{children:a.well_name}),(0,f.jsx)(W.Z,{children:(0,f.jsx)("span",{className:"ellipsis",title:a.job_type,children:a.job_type})}),(0,f.jsx)(W.Z,{children:k===a._id?(0,f.jsxs)(o.Z,{name:"status",value:this.state.editingRecord.status,fullWidth:!0,onChange:e=>this.handleInputChange(e,a),children:[(0,f.jsx)(d.Z,{value:"Qualified",children:"Qualified"}),(0,f.jsx)(d.Z,{value:"Disqualified",children:"Disqualified"})]}):a.status}),e.search_keywords_categories.map((e=>{var t;return(0,f.jsx)(W.Z,{children:null!==(t=a.final_counts[e])&&void 0!==t?t:0},e+a._id)}))]},a._id)))})]})}),(0,f.jsx)(T.Z,{rowsPerPageOptions:[5,10,25,50,100,500],component:"div",rowsPerPage:i,page:s,onPageChange:this.handleChangePage,onRowsPerPageChange:this.handleChangeRowsPerPage,count:r})]})})]})]})}}const re={fetchKeywordAnalysisRecords:i.rZ,fetchTotalKeywordAnalysisRecords:i.V4,updateQualifiedStatus:i.vC,updateAnyKeywordState:i.sj};var se=(0,s.$j)((e=>({records:e.keyword.keywordAnalysisRecords,loading:e.keyword.loading,error:e.keyword.error,totalKeywordAnalysisRecords:e.keyword.totalKeywordAnalysisRecords,kbapage:e.keyword.kbapage,kbarowsPerPage:e.keyword.kbarowsPerPage,kbadateRange:e.keyword.kbadateRange,kbasearchQuery:e.keyword.kbasearchQuery,kbasearchOption:e.keyword.kbasearchOption,kbasearchLevel:e.keyword.kbasearchLevel,kbasearchQualified:e.keyword.kbasearchQualified})),re)(te)},7893:function(e,a,t){var r=t(9201),s=t(184);a.Z=(0,r.Z)((0,s.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel")},2456:function(e,a,t){var r=t(9201),s=t(184);a.Z=(0,r.Z)((0,s.jsx)("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download")},8820:function(e,a,t){var r=t(9201),s=t(184);a.Z=(0,r.Z)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},5683:function(e,a,t){var r=t(9201),s=t(184);a.Z=(0,r.Z)((0,s.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save")}}]);
//# sourceMappingURL=155.59abfc19.chunk.js.map